var F=Object.defineProperty;var B=s=>{throw TypeError(s)};var $=(s,e,t)=>e in s?F(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var T=(s,e,t)=>$(s,typeof e!="symbol"?e+"":e,t),k=(s,e,t)=>e.has(s)||B("Cannot "+t);var i=(s,e,t)=>(k(s,e,"read from private field"),t?t.call(s):e.get(s)),l=(s,e,t)=>e.has(s)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),x=(s,e,t,r)=>(k(s,e,"write to private field"),r?r.call(s,t):e.set(s,t),t);import{b as Y,r as j,d as R,p as G,e as N,f as U,h as Z,g as H,m as J,s as K,a as Q,i as V,j as W,P as X,k as y,n as ee,o as te,q as se,t as ie,D as re,v as ae,w as ne,l as fe,x as de,y as ce,z as he,A as oe,S as ue,L as _e}from"./CWIBN2Iv.js";var o,_,c,v,p,A,E;class me{constructor(e,t=!0){T(this,"anchor");l(this,o,new Map);l(this,_,new Map);l(this,c,new Map);l(this,v,new Set);l(this,p,!0);l(this,A,()=>{var e=Y;if(i(this,o).has(e)){var t=i(this,o).get(e),r=i(this,_).get(t);if(r)j(r),i(this,v).delete(t);else{var n=i(this,c).get(t);n&&(i(this,_).set(t,n.effect),i(this,c).delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),r=n.effect)}for(const[a,h]of i(this,o)){if(i(this,o).delete(a),a===e)break;const f=i(this,c).get(h);f&&(R(f.effect),i(this,c).delete(h))}for(const[a,h]of i(this,_)){if(a===t||i(this,v).has(a))continue;const f=()=>{if(Array.from(i(this,o).values()).includes(a)){var g=document.createDocumentFragment();J(h,g),g.append(N()),i(this,c).set(a,{effect:h,fragment:g})}else R(h);i(this,v).delete(a),i(this,_).delete(a)};i(this,p)||!r?(i(this,v).add(a),G(h,f,!1)):f()}}});l(this,E,e=>{i(this,o).delete(e);const t=Array.from(i(this,o).values());for(const[r,n]of i(this,c))t.includes(r)||(R(n.effect),i(this,c).delete(r))});this.anchor=e,x(this,p,t)}ensure(e,t){var r=Y,n=K();if(t&&!i(this,_).has(e)&&!i(this,c).has(e))if(n){var a=document.createDocumentFragment(),h=N();a.append(h),i(this,c).set(e,{effect:U(()=>t(h)),fragment:a})}else i(this,_).set(e,U(()=>t(this.anchor)));if(i(this,o).set(r,e),n){for(const[f,u]of i(this,_))f===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[f,u]of i(this,c))f===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(i(this,A)),r.ondiscard(i(this,E))}else Z&&(this.anchor=H),i(this,A).call(this)}}o=new WeakMap,_=new WeakMap,c=new WeakMap,v=new WeakMap,p=new WeakMap,A=new WeakMap,E=new WeakMap;let D=!1;function le(s){var e=D;try{return D=!1,[s(),D]}finally{D=e}}function be(s,e,t,r){var M;var n=!fe||(t&de)!==0,a=(t&ne)!==0,h=(t&ae)!==0,f=r,u=!0,g=()=>(u&&(u=!1,f=h?Q(r):r),f),b;if(a){var q=ue in s||_e in s;b=((M=V(s,e))==null?void 0:M.set)??(q&&e in s?d=>s[e]=d:void 0)}var S,L=!1;a?[S,L]=le(()=>s[e]):S=s[e],S===void 0&&r!==void 0&&(S=g(),b&&(n&&W(),b(S)));var m;if(n?m=()=>{var d=s[e];return d===void 0?g():(u=!0,d)}:m=()=>{var d=s[e];return d!==void 0&&(f=void 0),d===void 0?f:d},n&&(t&X)===0)return m;if(b){var z=s.$$legacy;return(function(d,I){return arguments.length>0?((!n||!I||z||L)&&b(I?m():d),d):m()})}var O=!1,P=((t&ce)!==0?he:oe)(()=>(O=!1,m()));a&&y(P);var C=ie;return(function(d,I){if(arguments.length>0){const w=I?y(P):n&&a?ee(d):d;return te(P,w),O=!0,f!==void 0&&(f=w),d}return se&&O||(C.f&re)!==0?P.v:y(P)})}export{me as B,be as p};
